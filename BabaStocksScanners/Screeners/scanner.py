#!/usr/bin/env python
# coding: utf-8

# In[10]:


import pandas as pd
import requests
from bs4 import BeautifulSoup as bs


# In[11]:


url = 'https://chartink.com/screener/process'

cash_screener = {'scan_clause': '( {cash} ( ( {cash} ( latest volume >= 1 day ago volume * 2 or 1 day ago volume >= 2 days ago volume * 2 ) ) and( {33619} ( ( {cash} ( ( {cash} ( ( {cash} ( abs( weekly sma( weekly close , 100 ) - weekly low ) / weekly low < 0.05 ) ) or( {cash} ( latest low < weekly sma( weekly close , 100 ) and latest high > weekly sma( weekly close , 100 ) ) ) ) ) or( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( 5 weeks ago ema( 5 weeks ago close , 5 ) > 5 weeks ago ema( 5 weeks ago close , 13 ) and 6 weeks ago  ema( 5 weeks ago close , 5 )<= 6 weeks ago  ema( 5 weeks ago close , 13 ) ) ) or( {cash} ( 4 weeks ago ema( 4 weeks ago close , 5 ) > 4 weeks ago ema( 4 weeks ago close , 13 ) and 5 weeks ago  ema( 4 weeks ago close , 5 )<= 5 weeks ago  ema( 4 weeks ago close , 13 ) ) ) or( {cash} ( 3 weeks ago ema( 3 weeks ago close , 5 ) > 3 weeks ago ema( 3 weeks ago close , 13 ) and 4 weeks ago  ema( 3 weeks ago close , 5 )<= 4 weeks ago  ema( 3 weeks ago close , 13 ) ) ) or( {cash} ( 2 weeks ago ema( 2 weeks ago close , 5 ) > 2 weeks ago ema( 2 weeks ago close , 13 ) and 3 weeks ago  ema( 2 weeks ago close , 5 )<= 3 weeks ago  ema( 2 weeks ago close , 13 ) ) ) or( {cash} ( abs( 3 weeks ago ema( 3 weeks ago close , 5 ) - 3 weeks ago ema( 3 weeks ago close , 13 ) ) / 3 weeks ago ema( 3 weeks ago close , 13 ) < 0.005 ) ) or( {cash} ( abs( 2 weeks ago ema( 2 weeks ago close , 5 ) - 2 weeks ago ema( 2 weeks ago close , 13 ) ) / 2 weeks ago ema( 2 weeks ago close , 13 ) < 0.005 ) ) or( {cash} ( abs( 1 week ago ema( 1 week ago close , 5 ) - 1 week ago ema( 1 week ago close , 13 ) ) / 1 week ago ema( 1 week ago close , 13 ) < 0.005 ) ) ) ) and 1 week ago high < 2 weeks ago high and weekly high > 1 week ago high ) ) or( {cash} ( weekly ema( weekly close , 5 ) > weekly ema( weekly close , 13 ) and 1 week ago  ema( weekly close , 5 )<= 1 week ago  ema( weekly close , 13 ) ) ) ) ) ) ) or( {cash} ( ( {cash} ( ( {cash} ( abs( monthly sma( monthly close , 100 ) - monthly low ) / monthly low < 0.05 ) ) or( {cash} ( latest low < monthly sma( monthly close , 100 ) and latest high > monthly sma( monthly close , 100 ) ) ) ) ) or( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( 5 months ago ema( 5 months ago close , 5 ) > 5 months ago ema( 5 months ago close , 13 ) and 6 months ago  ema( 5 months ago close , 5 )<= 6 months ago  ema( 5 months ago close , 13 ) ) ) or( {cash} ( 4 months ago ema( 4 months ago close , 5 ) > 4 months ago ema( 4 months ago close , 13 ) and 5 months ago  ema( 4 months ago close , 5 )<= 5 months ago  ema( 4 months ago close , 13 ) ) ) or( {cash} ( 3 months ago ema( 3 months ago close , 5 ) > 3 months ago ema( 3 months ago close , 13 ) and 4 months ago  ema( 3 months ago close , 5 )<= 4 months ago  ema( 3 months ago close , 13 ) ) ) or( {cash} ( 2 months ago ema( 2 months ago close , 5 ) > 2 months ago ema( 2 months ago close , 13 ) and 3 months ago  ema( 2 months ago close , 5 )<= 3 months ago  ema( 2 months ago close , 13 ) ) ) or( {cash} ( abs( 3 months ago ema( 3 months ago close , 5 ) - 3 months ago ema( 3 months ago close , 13 ) ) / 3 months ago ema( 3 months ago close , 13 ) < 0.005 ) ) or( {cash} ( abs( 2 months ago ema( 2 months ago close , 5 ) - 2 months ago ema( 2 months ago close , 13 ) ) / 2 months ago ema( 2 months ago close , 13 ) < 0.005 ) ) or( {cash} ( abs( 1 month ago ema( 1 month ago close , 5 ) - 1 month ago ema( 1 month ago close , 13 ) ) / 1 month ago ema( 1 month ago close , 13 ) < 0.005 ) ) ) ) and 1 month ago high < 2 months ago high and monthly high > 1 month ago high ) ) or( {cash} ( monthly ema( monthly close , 5 ) > monthly ema( monthly close , 13 ) and 1 month ago  ema( monthly close , 5 )<= 1 month ago  ema( monthly close , 13 ) ) ) ) ) ) ) or( {cash} ( ( {cash} ( ( {cash} ( abs( latest sma( latest close , 100 ) - latest low ) / latest low < 0.05 ) ) or( {cash} ( latest low < latest sma( latest close , 100 ) and latest high > latest sma( latest close , 100 ) ) ) ) ) or( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( latest close > latest ema( latest close , 5 ) and 1 day ago  close <= 1 day ago  ema( latest close , 5 ) ) ) or( {cash} ( 5 days ago ema( latest close , 5 ) > 5 days ago ema( 5 days ago close , 13 ) and 6 days ago  ema( latest close , 5 )<= 6 days ago  ema( 5 days ago close , 13 ) ) ) or( {cash} ( 4 days ago ema( 4 days ago close , 5 ) > 4 days ago ema( 4 days ago close , 13 ) and 5 days ago  ema( 4 days ago close , 5 )<= 5 days ago  ema( 4 days ago close , 13 ) ) ) or( {cash} ( 3 days ago ema( 3 days ago close , 5 ) > 3 days ago ema( 3 days ago close , 13 ) and 4 days ago  ema( 3 days ago close , 5 )<= 4 days ago  ema( 3 days ago close , 13 ) ) ) or( {cash} ( 2 days ago ema( 2 days ago close , 5 ) > 2 days ago ema( 2 days ago close , 13 ) and 3 days ago  ema( 2 days ago close , 5 )<= 3 days ago  ema( 2 days ago close , 13 ) ) ) or( {cash} ( abs( 3 days ago ema( 3 days ago close , 5 ) - 3 days ago ema( 3 days ago close , 13 ) ) / 3 days ago ema( 3 days ago close , 13 ) < 0.005 ) ) or( {cash} ( abs( 2 days ago ema( 2 days ago close , 5 ) - 2 days ago ema( 2 days ago close , 13 ) ) / 2 days ago ema( 2 days ago close , 13 ) < 0.005 ) ) or( {cash} ( abs( 1 day ago ema( 1 day ago close , 5 ) - 1 day ago ema( 1 day ago close , 13 ) ) / 1 day ago ema( 1 day ago close , 13 ) < 0.005 ) ) ) ) and 1 day ago high < 2 days ago high and latest high > 1 day ago high ) ) or( {cash} ( latest ema( latest close , 5 ) > latest ema( latest close , 13 ) and 1 day ago  ema( latest close , 5 )<= 1 day ago  ema( latest close , 13 ) ) ) ) ) ) ) ) ) ) )' }
nifty_50_screener = {'scan_clause': '( ( {33492} ( ( {cash} ( latest volume >= 1 day ago volume * 2 or 1 day ago volume >= 2 days ago volume * 2 ) ) and ( {33619} ( ( {cash} ( ( {cash} ( ( {cash} ( abs ( weekly sma ( weekly close , 100 ) - weekly low ) / weekly low < 0.05 ) ) or ( {cash} ( latest low < weekly sma ( weekly close , 100 ) and latest high > weekly sma ( weekly close , 100 ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( 5 weeks ago ema ( 5 weeks ago close , 5 ) > 5 weeks ago ema ( 5 weeks ago close , 13 ) and 6 weeks ago  ema ( 5 weeks ago close , 5 )<= 6 weeks ago  ema ( 5 weeks ago close , 13 ) ) ) or ( {cash} ( 4 weeks ago ema ( 4 weeks ago close , 5 ) > 4 weeks ago ema ( 4 weeks ago close , 13 ) and 5 weeks ago  ema ( 4 weeks ago close , 5 )<= 5 weeks ago  ema ( 4 weeks ago close , 13 ) ) ) or ( {cash} ( 3 weeks ago ema ( 3 weeks ago close , 5 ) > 3 weeks ago ema ( 3 weeks ago close , 13 ) and 4 weeks ago  ema ( 3 weeks ago close , 5 )<= 4 weeks ago  ema ( 3 weeks ago close , 13 ) ) ) or ( {cash} ( 2 weeks ago ema ( 2 weeks ago close , 5 ) > 2 weeks ago ema ( 2 weeks ago close , 13 ) and 3 weeks ago  ema ( 2 weeks ago close , 5 )<= 3 weeks ago  ema ( 2 weeks ago close , 13 ) ) ) or ( {cash} ( abs ( 3 weeks ago ema ( 3 weeks ago close , 5 ) - 3 weeks ago ema ( 3 weeks ago close , 13 ) ) / 3 weeks ago ema ( 3 weeks ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 2 weeks ago ema ( 2 weeks ago close , 5 ) - 2 weeks ago ema ( 2 weeks ago close , 13 ) ) / 2 weeks ago ema ( 2 weeks ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 1 week ago ema ( 1 week ago close , 5 ) - 1 week ago ema ( 1 week ago close , 13 ) ) / 1 week ago ema ( 1 week ago close , 13 ) < 0.005 ) ) ) ) and 1 week ago high < 2 weeks ago high and weekly high > 1 week ago high ) ) or ( {cash} ( weekly ema ( weekly close , 5 ) > weekly ema ( weekly close , 13 ) and 1 week ago  ema ( weekly close , 5 )<= 1 week ago  ema ( weekly close , 13 ) ) ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( abs ( monthly sma ( monthly close , 100 ) - monthly low ) / monthly low < 0.05 ) ) or ( {cash} ( latest low < monthly sma ( monthly close , 100 ) and latest high > monthly sma ( monthly close , 100 ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( 5 months ago ema ( 5 months ago close , 5 ) > 5 months ago ema ( 5 months ago close , 13 ) and 6 months ago  ema ( 5 months ago close , 5 )<= 6 months ago  ema ( 5 months ago close , 13 ) ) ) or ( {cash} ( 4 months ago ema ( 4 months ago close , 5 ) > 4 months ago ema ( 4 months ago close , 13 ) and 5 months ago  ema ( 4 months ago close , 5 )<= 5 months ago  ema ( 4 months ago close , 13 ) ) ) or ( {cash} ( 3 months ago ema ( 3 months ago close , 5 ) > 3 months ago ema ( 3 months ago close , 13 ) and 4 months ago  ema ( 3 months ago close , 5 )<= 4 months ago  ema ( 3 months ago close , 13 ) ) ) or ( {cash} ( 2 months ago ema ( 2 months ago close , 5 ) > 2 months ago ema ( 2 months ago close , 13 ) and 3 months ago  ema ( 2 months ago close , 5 )<= 3 months ago  ema ( 2 months ago close , 13 ) ) ) or ( {cash} ( abs ( 3 months ago ema ( 3 months ago close , 5 ) - 3 months ago ema ( 3 months ago close , 13 ) ) / 3 months ago ema ( 3 months ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 2 months ago ema ( 2 months ago close , 5 ) - 2 months ago ema ( 2 months ago close , 13 ) ) / 2 months ago ema ( 2 months ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 1 month ago ema ( 1 month ago close , 5 ) - 1 month ago ema ( 1 month ago close , 13 ) ) / 1 month ago ema ( 1 month ago close , 13 ) < 0.005 ) ) ) ) and 1 month ago high < 2 months ago high and monthly high > 1 month ago high ) ) or ( {cash} ( monthly ema ( monthly close , 5 ) > monthly ema ( monthly close , 13 ) and 1 month ago  ema ( monthly close , 5 )<= 1 month ago  ema ( monthly close , 13 ) ) ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( abs ( latest sma ( latest close , 100 ) - latest low ) / latest low < 0.05 ) ) or ( {cash} ( latest low < latest sma ( latest close , 100 ) and latest high > latest sma ( latest close , 100 ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( latest close > latest ema ( latest close , 5 ) and 1 day ago  close <= 1 day ago  ema ( latest close , 5 ) ) ) or ( {cash} ( 5 days ago ema ( latest close , 5 ) > 5 days ago ema ( 5 days ago close , 13 ) and 6 days ago  ema ( latest close , 5 )<= 6 days ago  ema ( 5 days ago close , 13 ) ) ) or ( {cash} ( 4 days ago ema ( 4 days ago close , 5 ) > 4 days ago ema ( 4 days ago close , 13 ) and 5 days ago  ema ( 4 days ago close , 5 )<= 5 days ago  ema ( 4 days ago close , 13 ) ) ) or ( {cash} ( 3 days ago ema ( 3 days ago close , 5 ) > 3 days ago ema ( 3 days ago close , 13 ) and 4 days ago  ema ( 3 days ago close , 5 )<= 4 days ago  ema ( 3 days ago close , 13 ) ) ) or ( {cash} ( 2 days ago ema ( 2 days ago close , 5 ) > 2 days ago ema ( 2 days ago close , 13 ) and 3 days ago  ema ( 2 days ago close , 5 )<= 3 days ago  ema ( 2 days ago close , 13 ) ) ) or ( {cash} ( abs ( 3 days ago ema ( 3 days ago close , 5 ) - 3 days ago ema ( 3 days ago close , 13 ) ) / 3 days ago ema ( 3 days ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 2 days ago ema ( 2 days ago close , 5 ) - 2 days ago ema ( 2 days ago close , 13 ) ) / 2 days ago ema ( 2 days ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 1 day ago ema ( 1 day ago close , 5 ) - 1 day ago ema ( 1 day ago close , 13 ) ) / 1 day ago ema ( 1 day ago close , 13 ) < 0.005 ) ) ) ) and 1 day ago high < 2 days ago high and latest high > 1 day ago high ) ) or ( {cash} ( latest ema ( latest close , 5 ) > latest ema ( latest close , 13 ) and 1 day ago  ema ( latest close , 5 )<= 1 day ago  ema ( latest close , 13 ) ) ) ) ) ) ) ) ) ) ) )' }
nifty_100_screener = {'scan_clause': '( {33619} ( ( {cash} ( latest volume >= 1 day ago volume * 2 or 1 day ago volume >= 2 days ago volume * 2 ) ) and ( {33619} ( ( {cash} ( ( {cash} ( ( {cash} ( abs ( weekly sma ( weekly close , 100 ) - weekly low ) / weekly low < 0.05 ) ) or ( {cash} ( latest low < weekly sma ( weekly close , 100 ) and latest high > weekly sma ( weekly close , 100 ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( 5 weeks ago ema ( 5 weeks ago close , 5 ) > 5 weeks ago ema ( 5 weeks ago close , 13 ) and 6 weeks ago  ema ( 5 weeks ago close , 5 )<= 6 weeks ago  ema ( 5 weeks ago close , 13 ) ) ) or ( {cash} ( 4 weeks ago ema ( 4 weeks ago close , 5 ) > 4 weeks ago ema ( 4 weeks ago close , 13 ) and 5 weeks ago  ema ( 4 weeks ago close , 5 )<= 5 weeks ago  ema ( 4 weeks ago close , 13 ) ) ) or ( {cash} ( 3 weeks ago ema ( 3 weeks ago close , 5 ) > 3 weeks ago ema ( 3 weeks ago close , 13 ) and 4 weeks ago  ema ( 3 weeks ago close , 5 )<= 4 weeks ago  ema ( 3 weeks ago close , 13 ) ) ) or ( {cash} ( 2 weeks ago ema ( 2 weeks ago close , 5 ) > 2 weeks ago ema ( 2 weeks ago close , 13 ) and 3 weeks ago  ema ( 2 weeks ago close , 5 )<= 3 weeks ago  ema ( 2 weeks ago close , 13 ) ) ) or ( {cash} ( abs ( 3 weeks ago ema ( 3 weeks ago close , 5 ) - 3 weeks ago ema ( 3 weeks ago close , 13 ) ) / 3 weeks ago ema ( 3 weeks ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 2 weeks ago ema ( 2 weeks ago close , 5 ) - 2 weeks ago ema ( 2 weeks ago close , 13 ) ) / 2 weeks ago ema ( 2 weeks ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 1 week ago ema ( 1 week ago close , 5 ) - 1 week ago ema ( 1 week ago close , 13 ) ) / 1 week ago ema ( 1 week ago close , 13 ) < 0.005 ) ) ) ) and 1 week ago high < 2 weeks ago high and weekly high > 1 week ago high ) ) or ( {cash} ( weekly ema ( weekly close , 5 ) > weekly ema ( weekly close , 13 ) and 1 week ago  ema ( weekly close , 5 )<= 1 week ago  ema ( weekly close , 13 ) ) ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( abs ( monthly sma ( monthly close , 100 ) - monthly low ) / monthly low < 0.05 ) ) or ( {cash} ( latest low < monthly sma ( monthly close , 100 ) and latest high > monthly sma ( monthly close , 100 ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( 5 months ago ema ( 5 months ago close , 5 ) > 5 months ago ema ( 5 months ago close , 13 ) and 6 months ago  ema ( 5 months ago close , 5 )<= 6 months ago  ema ( 5 months ago close , 13 ) ) ) or ( {cash} ( 4 months ago ema ( 4 months ago close , 5 ) > 4 months ago ema ( 4 months ago close , 13 ) and 5 months ago  ema ( 4 months ago close , 5 )<= 5 months ago  ema ( 4 months ago close , 13 ) ) ) or ( {cash} ( 3 months ago ema ( 3 months ago close , 5 ) > 3 months ago ema ( 3 months ago close , 13 ) and 4 months ago  ema ( 3 months ago close , 5 )<= 4 months ago  ema ( 3 months ago close , 13 ) ) ) or ( {cash} ( 2 months ago ema ( 2 months ago close , 5 ) > 2 months ago ema ( 2 months ago close , 13 ) and 3 months ago  ema ( 2 months ago close , 5 )<= 3 months ago  ema ( 2 months ago close , 13 ) ) ) or ( {cash} ( abs ( 3 months ago ema ( 3 months ago close , 5 ) - 3 months ago ema ( 3 months ago close , 13 ) ) / 3 months ago ema ( 3 months ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 2 months ago ema ( 2 months ago close , 5 ) - 2 months ago ema ( 2 months ago close , 13 ) ) / 2 months ago ema ( 2 months ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 1 month ago ema ( 1 month ago close , 5 ) - 1 month ago ema ( 1 month ago close , 13 ) ) / 1 month ago ema ( 1 month ago close , 13 ) < 0.005 ) ) ) ) and 1 month ago high < 2 months ago high and monthly high > 1 month ago high ) ) or ( {cash} ( monthly ema ( monthly close , 5 ) > monthly ema ( monthly close , 13 ) and 1 month ago  ema ( monthly close , 5 )<= 1 month ago  ema ( monthly close , 13 ) ) ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( abs ( latest sma ( latest close , 100 ) - latest low ) / latest low < 0.05 ) ) or ( {cash} ( latest low < latest sma ( latest close , 100 ) and latest high > latest sma ( latest close , 100 ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( latest close > latest ema ( latest close , 5 ) and 1 day ago  close <= 1 day ago  ema ( latest close , 5 ) ) ) or ( {cash} ( 5 days ago ema ( latest close , 5 ) > 5 days ago ema ( 5 days ago close , 13 ) and 6 days ago  ema ( latest close , 5 )<= 6 days ago  ema ( 5 days ago close , 13 ) ) ) or ( {cash} ( 4 days ago ema ( 4 days ago close , 5 ) > 4 days ago ema ( 4 days ago close , 13 ) and 5 days ago  ema ( 4 days ago close , 5 )<= 5 days ago  ema ( 4 days ago close , 13 ) ) ) or ( {cash} ( 3 days ago ema ( 3 days ago close , 5 ) > 3 days ago ema ( 3 days ago close , 13 ) and 4 days ago  ema ( 3 days ago close , 5 )<= 4 days ago  ema ( 3 days ago close , 13 ) ) ) or ( {cash} ( 2 days ago ema ( 2 days ago close , 5 ) > 2 days ago ema ( 2 days ago close , 13 ) and 3 days ago  ema ( 2 days ago close , 5 )<= 3 days ago  ema ( 2 days ago close , 13 ) ) ) or ( {cash} ( abs ( 3 days ago ema ( 3 days ago close , 5 ) - 3 days ago ema ( 3 days ago close , 13 ) ) / 3 days ago ema ( 3 days ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 2 days ago ema ( 2 days ago close , 5 ) - 2 days ago ema ( 2 days ago close , 13 ) ) / 2 days ago ema ( 2 days ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 1 day ago ema ( 1 day ago close , 5 ) - 1 day ago ema ( 1 day ago close , 13 ) ) / 1 day ago ema ( 1 day ago close , 13 ) < 0.005 ) ) ) ) and 1 day ago high < 2 days ago high and latest high > 1 day ago high ) ) or ( {cash} ( latest ema ( latest close , 5 ) > latest ema ( latest close , 13 ) and 1 day ago  ema ( latest close , 5 )<= 1 day ago  ema ( latest close , 13 ) ) ) ) ) ) ) ) ) ) ) '}
nifty_200_screener = {'scan_clause': '( {46553} ( ( {cash} ( latest volume >= 1 day ago volume * 2 or 1 day ago volume >= 2 days ago volume * 2 ) ) and ( {33619} ( ( {cash} ( ( {cash} ( ( {cash} ( abs ( weekly sma ( weekly close , 100 ) - weekly low ) / weekly low < 0.05 ) ) or ( {cash} ( latest low < weekly sma ( weekly close , 100 ) and latest high > weekly sma ( weekly close , 100 ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( 5 weeks ago ema ( 5 weeks ago close , 5 ) > 5 weeks ago ema ( 5 weeks ago close , 13 ) and 6 weeks ago  ema ( 5 weeks ago close , 5 )<= 6 weeks ago  ema ( 5 weeks ago close , 13 ) ) ) or ( {cash} ( 4 weeks ago ema ( 4 weeks ago close , 5 ) > 4 weeks ago ema ( 4 weeks ago close , 13 ) and 5 weeks ago  ema ( 4 weeks ago close , 5 )<= 5 weeks ago  ema ( 4 weeks ago close , 13 ) ) ) or ( {cash} ( 3 weeks ago ema ( 3 weeks ago close , 5 ) > 3 weeks ago ema ( 3 weeks ago close , 13 ) and 4 weeks ago  ema ( 3 weeks ago close , 5 )<= 4 weeks ago  ema ( 3 weeks ago close , 13 ) ) ) or ( {cash} ( 2 weeks ago ema ( 2 weeks ago close , 5 ) > 2 weeks ago ema ( 2 weeks ago close , 13 ) and 3 weeks ago  ema ( 2 weeks ago close , 5 )<= 3 weeks ago  ema ( 2 weeks ago close , 13 ) ) ) or ( {cash} ( abs ( 3 weeks ago ema ( 3 weeks ago close , 5 ) - 3 weeks ago ema ( 3 weeks ago close , 13 ) ) / 3 weeks ago ema ( 3 weeks ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 2 weeks ago ema ( 2 weeks ago close , 5 ) - 2 weeks ago ema ( 2 weeks ago close , 13 ) ) / 2 weeks ago ema ( 2 weeks ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 1 week ago ema ( 1 week ago close , 5 ) - 1 week ago ema ( 1 week ago close , 13 ) ) / 1 week ago ema ( 1 week ago close , 13 ) < 0.005 ) ) ) ) and 1 week ago high < 2 weeks ago high and weekly high > 1 week ago high ) ) or ( {cash} ( weekly ema ( weekly close , 5 ) > weekly ema ( weekly close , 13 ) and 1 week ago  ema ( weekly close , 5 )<= 1 week ago  ema ( weekly close , 13 ) ) ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( abs ( monthly sma ( monthly close , 100 ) - monthly low ) / monthly low < 0.05 ) ) or ( {cash} ( latest low < monthly sma ( monthly close , 100 ) and latest high > monthly sma ( monthly close , 100 ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( 5 months ago ema ( 5 months ago close , 5 ) > 5 months ago ema ( 5 months ago close , 13 ) and 6 months ago  ema ( 5 months ago close , 5 )<= 6 months ago  ema ( 5 months ago close , 13 ) ) ) or ( {cash} ( 4 months ago ema ( 4 months ago close , 5 ) > 4 months ago ema ( 4 months ago close , 13 ) and 5 months ago  ema ( 4 months ago close , 5 )<= 5 months ago  ema ( 4 months ago close , 13 ) ) ) or ( {cash} ( 3 months ago ema ( 3 months ago close , 5 ) > 3 months ago ema ( 3 months ago close , 13 ) and 4 months ago  ema ( 3 months ago close , 5 )<= 4 months ago  ema ( 3 months ago close , 13 ) ) ) or ( {cash} ( 2 months ago ema ( 2 months ago close , 5 ) > 2 months ago ema ( 2 months ago close , 13 ) and 3 months ago  ema ( 2 months ago close , 5 )<= 3 months ago  ema ( 2 months ago close , 13 ) ) ) or ( {cash} ( abs ( 3 months ago ema ( 3 months ago close , 5 ) - 3 months ago ema ( 3 months ago close , 13 ) ) / 3 months ago ema ( 3 months ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 2 months ago ema ( 2 months ago close , 5 ) - 2 months ago ema ( 2 months ago close , 13 ) ) / 2 months ago ema ( 2 months ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 1 month ago ema ( 1 month ago close , 5 ) - 1 month ago ema ( 1 month ago close , 13 ) ) / 1 month ago ema ( 1 month ago close , 13 ) < 0.005 ) ) ) ) and 1 month ago high < 2 months ago high and monthly high > 1 month ago high ) ) or ( {cash} ( monthly ema ( monthly close , 5 ) > monthly ema ( monthly close , 13 ) and 1 month ago  ema ( monthly close , 5 )<= 1 month ago  ema ( monthly close , 13 ) ) ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( abs ( latest sma ( latest close , 100 ) - latest low ) / latest low < 0.05 ) ) or ( {cash} ( latest low < latest sma ( latest close , 100 ) and latest high > latest sma ( latest close , 100 ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( latest close > latest ema ( latest close , 5 ) and 1 day ago  close <= 1 day ago  ema ( latest close , 5 ) ) ) or ( {cash} ( 5 days ago ema ( latest close , 5 ) > 5 days ago ema ( 5 days ago close , 13 ) and 6 days ago  ema ( latest close , 5 )<= 6 days ago  ema ( 5 days ago close , 13 ) ) ) or ( {cash} ( 4 days ago ema ( 4 days ago close , 5 ) > 4 days ago ema ( 4 days ago close , 13 ) and 5 days ago  ema ( 4 days ago close , 5 )<= 5 days ago  ema ( 4 days ago close , 13 ) ) ) or ( {cash} ( 3 days ago ema ( 3 days ago close , 5 ) > 3 days ago ema ( 3 days ago close , 13 ) and 4 days ago  ema ( 3 days ago close , 5 )<= 4 days ago  ema ( 3 days ago close , 13 ) ) ) or ( {cash} ( 2 days ago ema ( 2 days ago close , 5 ) > 2 days ago ema ( 2 days ago close , 13 ) and 3 days ago  ema ( 2 days ago close , 5 )<= 3 days ago  ema ( 2 days ago close , 13 ) ) ) or ( {cash} ( abs ( 3 days ago ema ( 3 days ago close , 5 ) - 3 days ago ema ( 3 days ago close , 13 ) ) / 3 days ago ema ( 3 days ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 2 days ago ema ( 2 days ago close , 5 ) - 2 days ago ema ( 2 days ago close , 13 ) ) / 2 days ago ema ( 2 days ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 1 day ago ema ( 1 day ago close , 5 ) - 1 day ago ema ( 1 day ago close , 13 ) ) / 1 day ago ema ( 1 day ago close , 13 ) < 0.005 ) ) ) ) and 1 day ago high < 2 days ago high and latest high > 1 day ago high ) ) or ( {cash} ( latest ema ( latest close , 5 ) > latest ema ( latest close , 13 ) and 1 day ago  ema ( latest close , 5 )<= 1 day ago  ema ( latest close , 13 ) ) ) ) ) ) ) ) ) ) ) '}
nifty_500_screener = {'scan_clause': '( {57960} ( ( {cash} ( latest volume >= 1 day ago volume * 2 or 1 day ago volume >= 2 days ago volume * 2 ) ) and ( {33619} ( ( {cash} ( ( {cash} ( ( {cash} ( abs ( weekly sma ( weekly close , 100 ) - weekly low ) / weekly low < 0.05 ) ) or ( {cash} ( latest low < weekly sma ( weekly close , 100 ) and latest high > weekly sma ( weekly close , 100 ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( 5 weeks ago ema ( 5 weeks ago close , 5 ) > 5 weeks ago ema ( 5 weeks ago close , 13 ) and 6 weeks ago  ema ( 5 weeks ago close , 5 )<= 6 weeks ago  ema ( 5 weeks ago close , 13 ) ) ) or ( {cash} ( 4 weeks ago ema ( 4 weeks ago close , 5 ) > 4 weeks ago ema ( 4 weeks ago close , 13 ) and 5 weeks ago  ema ( 4 weeks ago close , 5 )<= 5 weeks ago  ema ( 4 weeks ago close , 13 ) ) ) or ( {cash} ( 3 weeks ago ema ( 3 weeks ago close , 5 ) > 3 weeks ago ema ( 3 weeks ago close , 13 ) and 4 weeks ago  ema ( 3 weeks ago close , 5 )<= 4 weeks ago  ema ( 3 weeks ago close , 13 ) ) ) or ( {cash} ( 2 weeks ago ema ( 2 weeks ago close , 5 ) > 2 weeks ago ema ( 2 weeks ago close , 13 ) and 3 weeks ago  ema ( 2 weeks ago close , 5 )<= 3 weeks ago  ema ( 2 weeks ago close , 13 ) ) ) or ( {cash} ( abs ( 3 weeks ago ema ( 3 weeks ago close , 5 ) - 3 weeks ago ema ( 3 weeks ago close , 13 ) ) / 3 weeks ago ema ( 3 weeks ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 2 weeks ago ema ( 2 weeks ago close , 5 ) - 2 weeks ago ema ( 2 weeks ago close , 13 ) ) / 2 weeks ago ema ( 2 weeks ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 1 week ago ema ( 1 week ago close , 5 ) - 1 week ago ema ( 1 week ago close , 13 ) ) / 1 week ago ema ( 1 week ago close , 13 ) < 0.005 ) ) ) ) and 1 week ago high < 2 weeks ago high and weekly high > 1 week ago high ) ) or ( {cash} ( weekly ema ( weekly close , 5 ) > weekly ema ( weekly close , 13 ) and 1 week ago  ema ( weekly close , 5 )<= 1 week ago  ema ( weekly close , 13 ) ) ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( abs ( monthly sma ( monthly close , 100 ) - monthly low ) / monthly low < 0.05 ) ) or ( {cash} ( latest low < monthly sma ( monthly close , 100 ) and latest high > monthly sma ( monthly close , 100 ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( 5 months ago ema ( 5 months ago close , 5 ) > 5 months ago ema ( 5 months ago close , 13 ) and 6 months ago  ema ( 5 months ago close , 5 )<= 6 months ago  ema ( 5 months ago close , 13 ) ) ) or ( {cash} ( 4 months ago ema ( 4 months ago close , 5 ) > 4 months ago ema ( 4 months ago close , 13 ) and 5 months ago  ema ( 4 months ago close , 5 )<= 5 months ago  ema ( 4 months ago close , 13 ) ) ) or ( {cash} ( 3 months ago ema ( 3 months ago close , 5 ) > 3 months ago ema ( 3 months ago close , 13 ) and 4 months ago  ema ( 3 months ago close , 5 )<= 4 months ago  ema ( 3 months ago close , 13 ) ) ) or ( {cash} ( 2 months ago ema ( 2 months ago close , 5 ) > 2 months ago ema ( 2 months ago close , 13 ) and 3 months ago  ema ( 2 months ago close , 5 )<= 3 months ago  ema ( 2 months ago close , 13 ) ) ) or ( {cash} ( abs ( 3 months ago ema ( 3 months ago close , 5 ) - 3 months ago ema ( 3 months ago close , 13 ) ) / 3 months ago ema ( 3 months ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 2 months ago ema ( 2 months ago close , 5 ) - 2 months ago ema ( 2 months ago close , 13 ) ) / 2 months ago ema ( 2 months ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 1 month ago ema ( 1 month ago close , 5 ) - 1 month ago ema ( 1 month ago close , 13 ) ) / 1 month ago ema ( 1 month ago close , 13 ) < 0.005 ) ) ) ) and 1 month ago high < 2 months ago high and monthly high > 1 month ago high ) ) or ( {cash} ( monthly ema ( monthly close , 5 ) > monthly ema ( monthly close , 13 ) and 1 month ago  ema ( monthly close , 5 )<= 1 month ago  ema ( monthly close , 13 ) ) ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( abs ( latest sma ( latest close , 100 ) - latest low ) / latest low < 0.05 ) ) or ( {cash} ( latest low < latest sma ( latest close , 100 ) and latest high > latest sma ( latest close , 100 ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( latest close > latest ema ( latest close , 5 ) and 1 day ago  close <= 1 day ago  ema ( latest close , 5 ) ) ) or ( {cash} ( 5 days ago ema ( latest close , 5 ) > 5 days ago ema ( 5 days ago close , 13 ) and 6 days ago  ema ( latest close , 5 )<= 6 days ago  ema ( 5 days ago close , 13 ) ) ) or ( {cash} ( 4 days ago ema ( 4 days ago close , 5 ) > 4 days ago ema ( 4 days ago close , 13 ) and 5 days ago  ema ( 4 days ago close , 5 )<= 5 days ago  ema ( 4 days ago close , 13 ) ) ) or ( {cash} ( 3 days ago ema ( 3 days ago close , 5 ) > 3 days ago ema ( 3 days ago close , 13 ) and 4 days ago  ema ( 3 days ago close , 5 )<= 4 days ago  ema ( 3 days ago close , 13 ) ) ) or ( {cash} ( 2 days ago ema ( 2 days ago close , 5 ) > 2 days ago ema ( 2 days ago close , 13 ) and 3 days ago  ema ( 2 days ago close , 5 )<= 3 days ago  ema ( 2 days ago close , 13 ) ) ) or ( {cash} ( abs ( 3 days ago ema ( 3 days ago close , 5 ) - 3 days ago ema ( 3 days ago close , 13 ) ) / 3 days ago ema ( 3 days ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 2 days ago ema ( 2 days ago close , 5 ) - 2 days ago ema ( 2 days ago close , 13 ) ) / 2 days ago ema ( 2 days ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 1 day ago ema ( 1 day ago close , 5 ) - 1 day ago ema ( 1 day ago close , 13 ) ) / 1 day ago ema ( 1 day ago close , 13 ) < 0.005 ) ) ) ) and 1 day ago high < 2 days ago high and latest high > 1 day ago high ) ) or ( {cash} ( latest ema ( latest close , 5 ) > latest ema ( latest close , 13 ) and 1 day ago  ema ( latest close , 5 )<= 1 day ago  ema ( latest close , 13 ) ) ) ) ) ) ) ) ) ) ) '}
midcap_50_screener = {'scan_clause': '( {136492} ( ( {cash} ( latest volume >= 1 day ago volume * 2 or 1 day ago volume >= 2 days ago volume * 2 ) ) and ( {33619} ( ( {cash} ( ( {cash} ( ( {cash} ( abs ( weekly sma ( weekly close , 100 ) - weekly low ) / weekly low < 0.05 ) ) or ( {cash} ( latest low < weekly sma ( weekly close , 100 ) and latest high > weekly sma ( weekly close , 100 ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( 5 weeks ago ema ( 5 weeks ago close , 5 ) > 5 weeks ago ema ( 5 weeks ago close , 13 ) and 6 weeks ago  ema ( 5 weeks ago close , 5 )<= 6 weeks ago  ema ( 5 weeks ago close , 13 ) ) ) or ( {cash} ( 4 weeks ago ema ( 4 weeks ago close , 5 ) > 4 weeks ago ema ( 4 weeks ago close , 13 ) and 5 weeks ago  ema ( 4 weeks ago close , 5 )<= 5 weeks ago  ema ( 4 weeks ago close , 13 ) ) ) or ( {cash} ( 3 weeks ago ema ( 3 weeks ago close , 5 ) > 3 weeks ago ema ( 3 weeks ago close , 13 ) and 4 weeks ago  ema ( 3 weeks ago close , 5 )<= 4 weeks ago  ema ( 3 weeks ago close , 13 ) ) ) or ( {cash} ( 2 weeks ago ema ( 2 weeks ago close , 5 ) > 2 weeks ago ema ( 2 weeks ago close , 13 ) and 3 weeks ago  ema ( 2 weeks ago close , 5 )<= 3 weeks ago  ema ( 2 weeks ago close , 13 ) ) ) or ( {cash} ( abs ( 3 weeks ago ema ( 3 weeks ago close , 5 ) - 3 weeks ago ema ( 3 weeks ago close , 13 ) ) / 3 weeks ago ema ( 3 weeks ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 2 weeks ago ema ( 2 weeks ago close , 5 ) - 2 weeks ago ema ( 2 weeks ago close , 13 ) ) / 2 weeks ago ema ( 2 weeks ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 1 week ago ema ( 1 week ago close , 5 ) - 1 week ago ema ( 1 week ago close , 13 ) ) / 1 week ago ema ( 1 week ago close , 13 ) < 0.005 ) ) ) ) and 1 week ago high < 2 weeks ago high and weekly high > 1 week ago high ) ) or ( {cash} ( weekly ema ( weekly close , 5 ) > weekly ema ( weekly close , 13 ) and 1 week ago  ema ( weekly close , 5 )<= 1 week ago  ema ( weekly close , 13 ) ) ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( abs ( monthly sma ( monthly close , 100 ) - monthly low ) / monthly low < 0.05 ) ) or ( {cash} ( latest low < monthly sma ( monthly close , 100 ) and latest high > monthly sma ( monthly close , 100 ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( 5 months ago ema ( 5 months ago close , 5 ) > 5 months ago ema ( 5 months ago close , 13 ) and 6 months ago  ema ( 5 months ago close , 5 )<= 6 months ago  ema ( 5 months ago close , 13 ) ) ) or ( {cash} ( 4 months ago ema ( 4 months ago close , 5 ) > 4 months ago ema ( 4 months ago close , 13 ) and 5 months ago  ema ( 4 months ago close , 5 )<= 5 months ago  ema ( 4 months ago close , 13 ) ) ) or ( {cash} ( 3 months ago ema ( 3 months ago close , 5 ) > 3 months ago ema ( 3 months ago close , 13 ) and 4 months ago  ema ( 3 months ago close , 5 )<= 4 months ago  ema ( 3 months ago close , 13 ) ) ) or ( {cash} ( 2 months ago ema ( 2 months ago close , 5 ) > 2 months ago ema ( 2 months ago close , 13 ) and 3 months ago  ema ( 2 months ago close , 5 )<= 3 months ago  ema ( 2 months ago close , 13 ) ) ) or ( {cash} ( abs ( 3 months ago ema ( 3 months ago close , 5 ) - 3 months ago ema ( 3 months ago close , 13 ) ) / 3 months ago ema ( 3 months ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 2 months ago ema ( 2 months ago close , 5 ) - 2 months ago ema ( 2 months ago close , 13 ) ) / 2 months ago ema ( 2 months ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 1 month ago ema ( 1 month ago close , 5 ) - 1 month ago ema ( 1 month ago close , 13 ) ) / 1 month ago ema ( 1 month ago close , 13 ) < 0.005 ) ) ) ) and 1 month ago high < 2 months ago high and monthly high > 1 month ago high ) ) or ( {cash} ( monthly ema ( monthly close , 5 ) > monthly ema ( monthly close , 13 ) and 1 month ago  ema ( monthly close , 5 )<= 1 month ago  ema ( monthly close , 13 ) ) ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( abs ( latest sma ( latest close , 100 ) - latest low ) / latest low < 0.05 ) ) or ( {cash} ( latest low < latest sma ( latest close , 100 ) and latest high > latest sma ( latest close , 100 ) ) ) ) ) or ( {cash} ( ( {cash} ( ( {cash} ( ( {cash} ( latest close > latest ema ( latest close , 5 ) and 1 day ago  close <= 1 day ago  ema ( latest close , 5 ) ) ) or ( {cash} ( 5 days ago ema ( latest close , 5 ) > 5 days ago ema ( 5 days ago close , 13 ) and 6 days ago  ema ( latest close , 5 )<= 6 days ago  ema ( 5 days ago close , 13 ) ) ) or ( {cash} ( 4 days ago ema ( 4 days ago close , 5 ) > 4 days ago ema ( 4 days ago close , 13 ) and 5 days ago  ema ( 4 days ago close , 5 )<= 5 days ago  ema ( 4 days ago close , 13 ) ) ) or ( {cash} ( 3 days ago ema ( 3 days ago close , 5 ) > 3 days ago ema ( 3 days ago close , 13 ) and 4 days ago  ema ( 3 days ago close , 5 )<= 4 days ago  ema ( 3 days ago close , 13 ) ) ) or ( {cash} ( 2 days ago ema ( 2 days ago close , 5 ) > 2 days ago ema ( 2 days ago close , 13 ) and 3 days ago  ema ( 2 days ago close , 5 )<= 3 days ago  ema ( 2 days ago close , 13 ) ) ) or ( {cash} ( abs ( 3 days ago ema ( 3 days ago close , 5 ) - 3 days ago ema ( 3 days ago close , 13 ) ) / 3 days ago ema ( 3 days ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 2 days ago ema ( 2 days ago close , 5 ) - 2 days ago ema ( 2 days ago close , 13 ) ) / 2 days ago ema ( 2 days ago close , 13 ) < 0.005 ) ) or ( {cash} ( abs ( 1 day ago ema ( 1 day ago close , 5 ) - 1 day ago ema ( 1 day ago close , 13 ) ) / 1 day ago ema ( 1 day ago close , 13 ) < 0.005 ) ) ) ) and 1 day ago high < 2 days ago high and latest high > 1 day ago high ) ) or ( {cash} ( latest ema ( latest close , 5 ) > latest ema ( latest close , 13 ) and 1 day ago  ema ( latest close , 5 )<= 1 day ago  ema ( latest close , 13 ) ) ) ) ) ) ) ) ) ) ) '}

with requests.session() as s:
    r_data = s.get(url)
    soup = bs(r_data.content, 'lxml')
    meta = soup.find('meta', {'name': 'csrf-token'})["content"]


# In[12]:


header = {"x-csrf-token": meta}
data_cash_screener = s.post(url, headers=header, data=cash_screener).json()
data_nifty_50_screener = s.post(url, headers=header, data=nifty_50_screener).json()
data_nifty_100_screener = s.post(url, headers=header, data=nifty_100_screener).json()
data_nifty_200_screener = s.post(url, headers=header, data=nifty_200_screener).json()
data_nifty_500_screener = s.post(url, headers=header, data=nifty_500_screener).json()
data_midcap_50_screener = s.post(url, headers=header, data=midcap_50_screener).json()


# In[13]:

stock_list_cash_screener = pd.DataFrame(data_cash_screener['data'])
stock_list_nifty_50_screener = pd.DataFrame(data_nifty_50_screener['data'])
stock_list_nifty_100_screener = pd.DataFrame(data_nifty_100_screener['data'])
stock_list_nifty_200_screener = pd.DataFrame(data_nifty_200_screener['data'])
stock_list_nifty_500_screener = pd.DataFrame(data_nifty_500_screener['data'])
stock_list_midcap_50_screener = pd.DataFrame(data_midcap_50_screener['data'])


# In[14]:

if stock_list_cash_screener.empty:
    stock_list_cash_screener_string = "No stocks available under this screener"
else:
    stock_list_cash_screener = stock_list_cash_screener.drop(['sr', 'bsecode', 'per_chg', 'close', 'volume'], axis=1)
    stock_list_cash_screener_string = stock_list_cash_screener.to_string()
if stock_list_nifty_50_screener.empty:
    stock_list_nifty_50_screener_string = "No stocks available under this screener"
else:
    stock_list_nifty_50_screener = stock_list_nifty_50_screener.drop(['sr', 'bsecode', 'per_chg', 'close', 'volume'], axis=1)
    stock_list_nifty_50_screener_string  = stock_list_nifty_50_screener.to_string()
if stock_list_nifty_100_screener.empty:
    stock_list_nifty_100_screener_string = "No stocks available under this screener"
else:
    stock_list_nifty_100_screener = stock_list_nifty_100_screener.drop(['sr', 'bsecode', 'per_chg', 'close', 'volume'], axis=1)
    stock_list_nifty_100_screener_string = stock_list_nifty_100_screener.to_string()
if stock_list_nifty_200_screener.empty:
    stock_list_nifty_200_screener_string = "No stocks available under this screener"
else:
    stock_list_nifty_200_screener = stock_list_nifty_200_screener.drop(['sr', 'bsecode', 'per_chg', 'close', 'volume'], axis=1)
    stock_list_nifty_200_screener_string = stock_list_nifty_200_screener.to_string()
if stock_list_nifty_500_screener.empty:
    stock_list_nifty_500_screener_string = "No stocks available under this screener"
else:
    stock_list_nifty_500_screener = stock_list_nifty_500_screener.drop(['sr', 'bsecode', 'per_chg', 'close', 'volume'], axis=1)
    stock_list_nifty_500_screener_string = stock_list_nifty_500_screener.to_string()

if stock_list_midcap_50_screener.empty:
    stock_list_midcap_50_screener_string = "No stocks available under this screener"
else:
    stock_list_midca0p_50_screener = stock_list_midcap_50_screener.drop(['sr', 'bsecode', 'per_chg', 'close', 'volume'], axis=1)
    stock_list_midcap_50_screener_string = stock_list_midcap_50_screener.to_string()

